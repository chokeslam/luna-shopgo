{"version":3,"file":"currency.js","names":["Currency","_export","setters","execute","isSubCurrency","getCurrentCurrency","code","getMainCurrency","u","data","current","main","format","num","currency","arguments","length","undefined","addCode","negative","Math","abs","exchange","formatted","numberFormat","decimalPlace","decimalPoint","space","signPosition","sign","formatMainCurrency","exchangeRate","window"],"sources":["currency.js"],"sourcesContent":["/**\n * Part of shopgo project.\n *\n * @copyright  Copyright (C) 2023 __ORGANIZATION__.\n * @license    __LICENSE__\n */\n\nexport class Currency {\n  static isSubCurrency() {\n    return this.getCurrentCurrency().code !== this.getMainCurrency().code;\n  }\n\n  static getCurrentCurrency() {\n    return u.data('currency').current;\n  }\n\n  static getMainCurrency() {\n    return u.data('currency').main;\n  }\n\n  /**\n   * Translate from PHP Currency::formatPrice() by ChatGPT\n   *\n   * @param {Number|String} num\n   * @param {*} currency\n   * @param {Boolean} addCode\n   * @returns {string}\n   */\n  static format(num, currency = undefined, addCode = false) {\n    currency = currency || this.getCurrentCurrency();\n\n    let negative = num < 0;\n    num = Math.abs(num);\n\n    num = this.exchange(num, currency);\n\n    let formatted = u.numberFormat(num, currency.decimalPlace, currency.decimalPoint);\n\n    let space = currency.space ? ' ' : '';\n\n    if (currency.signPosition === 'start') {\n      formatted = currency.sign + space + formatted;\n    } else {\n      formatted += space + currency.sign;\n    }\n\n    if (negative) {\n      return '-' + formatted;\n    }\n\n    if (addCode) {\n      formatted = currency.code + \" \" + formatted;\n    }\n\n    return formatted;\n  }\n\n  static formatMainCurrency(num, addCode = false) {\n    return this.format(num, this.getMainCurrency(), addCode);\n  }\n\n  static exchange(num, currency) {\n    return num * currency.exchangeRate;\n  }\n}\n\nwindow.Currency = Currency;\n"],"mappings":";;;MAOaA,QAAQ;EAAAC,OAAA;EAAA;IAAAC,OAAA;IAAAC,OAAA,WAAAA,CAAA;MAPrB;AACA;AACA;AACA;AACA;AACA;MALAF,OAAA,aAOaD,QAAQ,GAAd,MAAMA,QAAQ,CAAC;QACpB,OAAOI,aAAaA,CAAA,EAAG;UACrB,OAAO,IAAI,CAACC,kBAAkB,EAAE,CAACC,IAAI,KAAK,IAAI,CAACC,eAAe,EAAE,CAACD,IAAI;QACvE;QAEA,OAAOD,kBAAkBA,CAAA,EAAG;UAC1B,OAAOG,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC,CAACC,OAAO;QACnC;QAEA,OAAOH,eAAeA,CAAA,EAAG;UACvB,OAAOC,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC,CAACE,IAAI;QAChC;;QAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;QACE,OAAOC,MAAMA,CAACC,GAAG,EAAyC;UAAA,IAAvCC,QAAQ,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGE,SAAS;UAAA,IAAEC,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;UACtDD,QAAQ,GAAGA,QAAQ,IAAI,IAAI,CAACT,kBAAkB,EAAE;UAEhD,IAAIc,QAAQ,GAAGN,GAAG,GAAG,CAAC;UACtBA,GAAG,GAAGO,IAAI,CAACC,GAAG,CAACR,GAAG,CAAC;UAEnBA,GAAG,GAAG,IAAI,CAACS,QAAQ,CAACT,GAAG,EAAEC,QAAQ,CAAC;UAElC,IAAIS,SAAS,GAAGf,CAAC,CAACgB,YAAY,CAACX,GAAG,EAAEC,QAAQ,CAACW,YAAY,EAAEX,QAAQ,CAACY,YAAY,CAAC;UAEjF,IAAIC,KAAK,GAAGb,QAAQ,CAACa,KAAK,GAAG,GAAG,GAAG,EAAE;UAErC,IAAIb,QAAQ,CAACc,YAAY,KAAK,OAAO,EAAE;YACrCL,SAAS,GAAGT,QAAQ,CAACe,IAAI,GAAGF,KAAK,GAAGJ,SAAS;UAC/C,CAAC,MAAM;YACLA,SAAS,IAAII,KAAK,GAAGb,QAAQ,CAACe,IAAI;UACpC;UAEA,IAAIV,QAAQ,EAAE;YACZ,OAAO,GAAG,GAAGI,SAAS;UACxB;UAEA,IAAIL,OAAO,EAAE;YACXK,SAAS,GAAGT,QAAQ,CAACR,IAAI,GAAG,GAAG,GAAGiB,SAAS;UAC7C;UAEA,OAAOA,SAAS;QAClB;QAEA,OAAOO,kBAAkBA,CAACjB,GAAG,EAAmB;UAAA,IAAjBK,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;UAC5C,OAAO,IAAI,CAACH,MAAM,CAACC,GAAG,EAAE,IAAI,CAACN,eAAe,EAAE,EAAEW,OAAO,CAAC;QAC1D;QAEA,OAAOI,QAAQA,CAACT,GAAG,EAAEC,QAAQ,EAAE;UAC7B,OAAOD,GAAG,GAAGC,QAAQ,CAACiB,YAAY;QACpC;MACF,CAAC;MAEDC,MAAM,CAAChC,QAAQ,GAAGA,QAAQ;IAAC;EAAA;AAAA"}