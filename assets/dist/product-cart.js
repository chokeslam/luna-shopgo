System.register(["@main"],(function(t,a){async function e(t){const a=t.dataset.id;if(!a)throw new Error("No product ID");const e=t.dataset.variantId;if(!e)throw new Error("No variant ID");const r=document.querySelector("[data-role=quantity]");try{const t=await u.$http.post("@cart_ajax/addToCart",{product_id:a,variant_id:e,quantity:Number((null==r?void 0:r.value)||1)});return n(t.data.data),t.data}catch(t){console.error(t),u.alert(t.message,"","warning")}}function r(){location.href=u.route("cart")}function n(t){u.trigger("cart.update",t);const a=t.length,e=document.querySelectorAll("[data-role=cart-button]");for(const t of e){const e=t.querySelector("[data-role=cart-quantity]");t.classList.toggle("h-has-items",a>0),e.textContent=a}}return{setters:[function(t){}],execute:function(){u.delegate(document,"[data-task=add-to-cart]","click",(t=>{!async function(t){try{e(t)}catch(t){return void u.alert(t.message,"","warning")}await swal({title:"已加入購物車",buttons:["繼續購物","前往結帳"]})&&r()}(t.target)})),u.delegate(document,"[data-task=buy]","click",(t=>{!function(t){try{e(t)}catch(t){return void u.alert(t.message,"","warning")}r()}(t.target)})),u.delegate(document,"[data-task=addon]","click",(t=>{!async function(t){const a=t.dataset.apMapId;try{const t=await u.$http.post("@cart_ajax/addon",{apMapId:a});n(t.data.data),swal({title:"已加購"}),t.data}catch(t){console.error(t),u.alert(t.message,"","warning")}}(t.target)}))}}}));
//# sourceMappingURL=product-cart.js.map
